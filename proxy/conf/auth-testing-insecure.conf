
<Location />
    AuthName "TODO add real authentication here. For now use arbitrary user and password."
    AuthType Basic
    AuthBasicProvider anon

    Anonymous_NoUserID off
    Anonymous_MustGiveEmail off
    Anonymous_VerifyEmail off
    Anonymous_LogEmail off
    Anonymous "*"

    Require valid-user

    # Make sure X-Forwarded-User header is set, and overwritten if coming from client
    RewriteEngine on
    RewriteCond %{ENV:REMOTE_USER} ^$
    RewriteRule .* - [NS,E=REMOTE_USER:%{LA-U:REMOTE_USER}]
    RequestHeader set X-Perimeter-User %{REMOTE_USER}e
</Location>
